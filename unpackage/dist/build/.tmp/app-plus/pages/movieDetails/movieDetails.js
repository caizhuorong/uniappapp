(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/movieDetails/movieDetails"],{"3fd7":function(t,e,i){"use strict";i.r(e);var n=i("ced9"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"541b":function(t,e,i){},"577e":function(t,e,i){"use strict";i.r(e);var n=i("5d25"),o=i("3fd7");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("ed22");var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"735c59a2",null);e["default"]=r.exports},"5d25":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=(t._self._c,parseInt(void 0!=t.advBottom[0]?t.advBottom[0].showtime+"000":"0"));t.$mp.data=Object.assign({},{$root:{m0:i}})},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"6d88":function(t,e,i){"use strict";(function(t){i("bee6"),i("921b");n(i("66fd"));var e=n(i("577e"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},ced9:function(t,e,i){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(i("a34a")),a=s(i("040e"));function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i,n,o,a,s){try{var r=t[a](s),l=r.value}catch(c){return void i(c)}r.done?e(l):Promise.resolve(l).then(n,o)}function l(t){return function(){var e=this,i=arguments;return new Promise(function(n,o){var a=t.apply(e,i);function s(t){r(a,n,o,s,l,"next",t)}function l(t){r(a,n,o,s,l,"throw",t)}s(void 0)})}}var c=!1,u={name:"movieDetails",data:function(){return{animationData:{},adv:{},advTop:{},advBottom:[],recommend:[],movieInfo:{name:"",plays:"",release_time:""},currentPraiseMount:0,currentCaiMount:0,isPraiseOrCai:2,player:null,reCountDOM:{},tryLookTime:null,totalTime:null,currentTime:null,currentMovieId:null,topAdvPlentyTimeInterval:null,topAdvPlentyTime:null,isCollect:!1,isAllowCollect:!0,isAllowCancelCollect:!0,isAllowPraiseOrCai:!0,isLookIntro:!0,isOpenPlay:!1,isPause:!1,isPlayEnd:!1,isVip:!1,isFirstPlay:!0,isAllowPlay:!0,isLikeMovie:!1,isHaveTopAdv:!1,isFromExternal:!1,showzd:"",movieId:"",initial:0}},onLoad:function(e){this.movieId=e.movieId,this.getMovieInfo(e.movieId);var i=t.createAnimation({duration:300,timingFunction:"ease"});this.animation=i},onReady:function(){},onUnload:function(){null!=this.totalTime&&this.writePlayRecord()},methods:{goextension:function(){t.navigateTo({url:"../extension/extension"})},govipCenter:function(){t.switchTab({url:"../vipCenter/vipCenter"})},goFeedback:function(e,i){t.navigateTo({url:"../feedback/feedback?id=".concat(e,"&name=").concat(i)})},goAdv:function(t){t&&plus.runtime.openURL(t,function(t){})},doCollect:function(){var e=l(o.default.mark(function e(){var i;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isAllowCollect){e.next=6;break}return this.isAllowCollect=!1,e.next=4,a.default.getInfoByAxios("post","".concat(a.default.config.host,"/api/Collection/collection"),{video_id:parseInt(this.movieId)},!0);case 4:i=e.sent,1==i.data.code&&(this.isAllowCollect=!0,this.isCollect=!0,t.showToast({title:"收藏成功",icon:"none"}));case 6:case"end":return e.stop()}},e,this)}));function i(){return e.apply(this,arguments)}return i}(),cancelCollect:function(){var e=l(o.default.mark(function e(){var i;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isAllowCancelCollect){e.next=6;break}return this.isAllowCancelCollect=!1,e.next=4,a.default.getInfoByAxios("post","".concat(a.default.config.host,"/api/Collection/cancelCollection"),{video_id:parseInt(this.movieId)},!0);case 4:i=e.sent,"1"==i.data.code&&(this.isAllowCancelCollect=!0,this.isCollect=!1,t.showToast({title:"取消成功",icon:"none"}));case 6:case"end":return e.stop()}},e,this)}));function i(){return e.apply(this,arguments)}return i}(),doPraiseOrCai:function(){var e=l(o.default.mark(function e(i){var n,s;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(1!=i){e.next=10;break}if(!this.isAllowPraiseOrCai){e.next=8;break}return this.isAllowPraiseOrCai=!1,e.next=5,a.default.getInfoByAxios("post","".concat(a.default.config.host,"/api/Likeinfo/video_like"),{video_id:parseInt(this.movieId)},!0);case 5:n=e.sent,this.isAllowPraiseOrCai=!0,"1"==n.data.code?1==n.data.data.operate?(this.currentPraiseMount++,this.isPraiseOrCai=1):0==n.data.data.operate&&(this.currentCaiMount++,this.isPraiseOrCai=0):"用户已经对该视频进行赞踩"==n.data.msg&&t.showToast({title:"用户已经对该视频进行赞踩",icon:"none"});case 8:e.next=17;break;case 10:if(!this.isAllowPraiseOrCai){e.next=17;break}return this.isAllowPraiseOrCai=!1,e.next=14,a.default.getInfoByAxios("post","".concat(a.default.config.host,"/api/Likeinfo/video_like_cancel"),{video_id:parseInt(this.movieId)},!0);case 14:s=e.sent,this.isAllowPraiseOrCai=!0,"1"==s.data.code?1==s.data.data.operate?(this.currentPraiseMount++,this.isPraiseOrCai=1):0==s.data.data.operate&&(this.currentCaiMount++,this.isPraiseOrCai=0):"用户已经对该视频进行赞踩"==s.data.msg&&t.showToast({title:"用户已经对该视频进行赞踩",icon:"none"});case 17:case"end":return e.stop()}},e,this)}));function i(t){return e.apply(this,arguments)}return i}(),timeupdates:function(e){if((null==this.totalTime||this.totalTime<0)&&(this.totalTime=e.detail.duration),this.currentTime=Math.floor(e.detail.currentTime),c&&this.totalTime>1&&(c=!1,console.log(n(123," at pages\\movieDetails\\movieDetails.vue:297")),this.writePlayRecord()),!this.isVip){var i=Math.floor(e.detail.currentTime);i>=parseFloat(this.showzd)&&(this.videoContext=t.createVideoContext("myVideo"),this.videoContext.exitFullScreen(),this.isPlayEnd=!0)}},getMovieInfo:function(){var e=l(o.default.mark(function e(i){var n,s=this;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.currentMovieId=i,e.next=3,a.default.getInfoByAxios("post","".concat(a.default.config.host,"/api/video/video_info"),{video_id:i},!0);case 3:n=e.sent,this.totalTime=null,1,this.isPlayEnd=!1,c=!0,this.adv=n.data.data.ad,this.advTop=n.data.data.advert_onplayer,0!=n.data.data.advert_onplayer.length&&(this.topAdvPlentyTime=parseInt(n.data.data.advert_onplayer[0].showtime)),this.advBottom=n.data.data.advert_playerdown,this.recommend=n.data.data.recommend_list,this.movieInfo={},setTimeout(function(){s.movieInfo=n.data.data.video_info},400),this.showzd=n.data.data.showzd,this.isVip=0!=t.getStorageSync("userInfo").is_vip,this.openTopAdv(),this.isCollect="0"!=this.movieInfo.is_collect,this.currentPraiseMount=this.movieInfo.likes,this.currentCaiMount=this.movieInfo.dislikes,0==this.movieInfo.is_like?this.isPraiseOrCai=0:1==this.movieInfo.is_like?this.isPraiseOrCai=1:2==this.movieInfo.is_like&&(this.isPraiseOrCai=2);case 23:case"end":return e.stop()}},e,this)}));function i(t){return e.apply(this,arguments)}return i}(),lookIntro:function(){this.isLookIntro=!this.isLookIntro,this.isLookIntro?(this.animation.height("0upx").step(),this.animationData=this.animation.export()):(this.animation.height("300upx").step(),this.animationData=this.animation.export())},goMovieDetailsAll:function(t){this.movieId=t,this.getMovieInfo(t)},doShare:function(){t.navigateTo({url:"../extension/extension"})},writePlayRecord:function(){var t=l(o.default.mark(function t(){return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.totalTime||!this.currentTime){t.next=4;break}return t.next=3,a.default.getInfoByAxios("post","".concat(a.default.config.host,"/api/History/record"),{video_id:this.currentMovieId,index:1,type:1,progress:this.currentTime,total_time:this.totalTime},!0);case 3:t.sent;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),openTopAdv:function(){var t=this;""!=this.advTop&&(this.topAdvPlentyTimeInterval&&clearInterval(this.topAdvPlentyTimeInterval),this.topAdvPlentyTimeInterval=setInterval(function(){t.topAdvPlentyTime>0?(t.isHaveTopAdv=!0,t.topAdvPlentyTime--):(clearInterval(t.topAdvPlentyTimeInterval),t.isHaveTopAdv=!1)},1e3))}}};e.default=u}).call(this,i("6e42")["default"],i("0de9")["default"])},ed22:function(t,e,i){"use strict";var n=i("541b"),o=i.n(n);o.a}},[["6d88","common/runtime","common/vendor"]]]);